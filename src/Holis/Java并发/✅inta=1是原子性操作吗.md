# ✅int a = 1 是原子性操作吗
<!--page header-->

<a name="KqGOs"></a>
# 典型回答


在Java中，int a = 1;这条语句可以被认为是原子性操作，因为它是一个简单的赋值语句，它在一个操作中完成，不会被中断。在单线程的情况下，这条语句将会原子性地执行，即将1赋值给变量a的操作是不可分割的，不会被其它线程中断。

但是，在多线程的情况下，多个线程可以同时访问和修改同一个变量，这就可能导致竞态条件（race condition）的问题，即多个线程争夺同一个资源，导致结果无法预测。

举个例子：

```java
int a = 0;

// 线程1
a = 1;

// 线程2
a = 2;

```

尽管每个赋值语句本身可能是原子的，但是在多线程环境中，线程1和线程2的执行顺序是不确定的。可能会出现以下情况：

1. 线程1执行完毕后，线程2再执行，此时a的值为2。
2. 线程2执行完毕后，线程1再执行，此时a的值为1。

这种情况被称为竞态条件（race condition）。为了避免竞态条件和确保线程安全，可以使用同步机制，例如使用 synchronized 关键字或者 java.util.concurrent 包中的原子类（如 AtomicInteger）来保护共享数据的访问。这样可以确保在同一时刻只有一个线程能够访问共享数据，从而避免竞态条件。


<!--page footer-->
- 原文: <https://www.yuque.com/hollis666/axzrte/qc0bbxi2p2zbu3o7>