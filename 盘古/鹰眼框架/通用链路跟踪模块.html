<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/%E7%9B%98%E5%8F%A4/%E9%B9%B0%E7%9C%BC%E6%A1%86%E6%9E%B6/%E9%80%9A%E7%94%A8%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E6%A8%A1%E5%9D%97.html"><meta property="og:title" content="é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—"><meta property="og:description" content="é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å— å¦‚ä½•ä½¿ç”¨ json yaml æŠ€æœ¯åŸç† java java java java java"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-11-18T07:25:41.000Z"><meta property="article:author" content="Cotton Eye Joe"><meta property="article:modified_time" content="2024-11-18T07:25:41.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—","image":[""],"dateModified":"2024-11-18T07:25:41.000Z","author":[{"@type":"Person","name":"Cotton Eye Joe","url":"https://github.com/ToDreamr"}]}</script><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><script async src="https://umami.zhenxin.me/script.js" data-website-id="a799e189-cf7e-4f5a-ac98-71de364f3637"></script><script src="https://cdn.armoe.cn/static/js/autoGray.js"></script><title>é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—</title><meta name="description" content="é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å— å¦‚ä½•ä½¿ç”¨ json yaml æŠ€æœ¯åŸç† java java java java java">
    <link rel="preload" href="/assets/style-DuvwdHTW.css" as="style"><link rel="stylesheet" href="/assets/style-DuvwdHTW.css">
    <link rel="modulepreload" href="/assets/app-ux1ElDeN.js"><link rel="modulepreload" href="/assets/é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—.html-Bcbm3RSy.js">
    <link rel="prefetch" href="/assets/index.html-DkRn_b3T.js" as="script"><link rel="prefetch" href="/assets/portfolio.html-B6FAj5eh.js" as="script"><link rel="prefetch" href="/assets/å‹é“¾.html-BtqT0egO.js" as="script"><link rel="prefetch" href="/assets/index.html-MjxyBduW.js" as="script"><link rel="prefetch" href="/assets/disable.html-D7ag9Qnr.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-B5N0Gmio.js" as="script"><link rel="prefetch" href="/assets/layout.html-BmWb-tlu.js" as="script"><link rel="prefetch" href="/assets/markdown.html-DuIH7cmg.js" as="script"><link rel="prefetch" href="/assets/page.html-UVtg9nuw.js" as="script"><link rel="prefetch" href="/assets/å‹é“¾.html-Cn5J0dni.js" as="script"><link rel="prefetch" href="/assets/index.html-2pt3o1M4.js" as="script"><link rel="prefetch" href="/assets/index.html-B0j7bp28.js" as="script"><link rel="prefetch" href="/assets/Otome Games Analysis.html-DBJvp6xD.js" as="script"><link rel="prefetch" href="/assets/åœ¨ç”Ÿæ´»ä¸­çš„ä¸€äº›æ€è€ƒé—®é¢˜.html-BESVmcRn.js" as="script"><link rel="prefetch" href="/assets/å­¦ä¹ è®¡åˆ’.html-DNp-rWP9.js" as="script"><link rel="prefetch" href="/assets/Idea.html-DWdlSJ2O.js" as="script"><link rel="prefetch" href="/assets/10æœˆ.html-3PNUe7_J.js" as="script"><link rel="prefetch" href="/assets/ä¾èµ–ç›¸å…³.html-CDh1iVty.js" as="script"><link rel="prefetch" href="/assets/word.html-DRcKKTeZ.js" as="script"><link rel="prefetch" href="/assets/æ•°å­—é©¬åŠ›.html-CxgUjQ6f.js" as="script"><link rel="prefetch" href="/assets/7.0ç—…å†.html-vT4fjEab.js" as="script"><link rel="prefetch" href="/assets/Oracleæ•°æ®åº“éƒ¨åˆ†ä»£ç æµ‹è¯•ä¸é€šè¿‡.html-2tuMau1e.js" as="script"><link rel="prefetch" href="/assets/SQLæ—¥å¿—æ’æŸ¥è®°å½•çš„å·¥ä½œæµç¨‹.html-MTwYo4ot.js" as="script"><link rel="prefetch" href="/assets/kemerç—…å†éƒ¨æ¶æ„æ•´ç†.html-CBgXFEiP.js" as="script"><link rel="prefetch" href="/assets/äº‹åŠ¡åˆ†æ.html--ITdHwpD.js" as="script"><link rel="prefetch" href="/assets/å¦‚ä½•åœ¨å·¥ä½œå½“ä¸­ä¹¦å†™éœ€è¦çš„SQL.html-BwgKJyz-.js" as="script"><link rel="prefetch" href="/assets/å·¥ä½œæµç¨‹.html-q0RKxYSq.js" as="script"><link rel="prefetch" href="/assets/å¼€å‘è§„èŒƒå’ŒçŸ¥è¯†æ–‡æ¡£.html-DE1Z8rZc.js" as="script"><link rel="prefetch" href="/assets/å¼‚å¸¸SQLæ•°æ®æŸ¥è¯¢.html-BNEBTPUJ.js" as="script"><link rel="prefetch" href="/assets/è´¨æ§é¡¹-ä¿®æ”¹ä»£ç (SQL).html-BunBsX3m.js" as="script"><link rel="prefetch" href="/assets/é‡‘å”è½¯ä»¶.html-CS_IxL8h.js" as="script"><link rel="prefetch" href="/assets/é‡‘å”è½¯ä»¶éƒ¨åˆ†ä»£ç åˆ†æ.html-JQccsZf0.js" as="script"><link rel="prefetch" href="/assets/Ubuntuç³»ç»Ÿå„è½¯ä»¶.html-CNf-IA4u.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-DtW5G8YL.js" as="script"><link rel="prefetch" href="/assets/ç—…å†-ä¸´åºŠéƒ¨é—¨åç«¯å®ä¹ .html-xntb2PDH.js" as="script"><link rel="prefetch" href="/assets/é«˜å¹¶å‘ç¼–ç¨‹.html-DKKymrOq.js" as="script"><link rel="prefetch" href="/assets/JVMå†…å­˜æ¨¡å‹.html-L8SoDUGN.js" as="script"><link rel="prefetch" href="/assets/å†…å­˜ç®¡ç†.html-DeeHTD6v.js" as="script"><link rel="prefetch" href="/assets/ç±»ä¸ç±»åŠ è½½.html-C7Q-os97.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™.html-DxMb3bkP.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰ç»“æ„å‹.html-Co4YmqLB.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰åˆ›å»ºå‹.html-jqe0gdoD.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼ç³»åˆ— - è®¾è®¡æ¨¡å¼ï¼ˆå››ï¼‰è¡Œä¸ºå‹.html-C39YwVpP.js" as="script"><link rel="prefetch" href="/assets/Cpp.html-B6FjZ9og.js" as="script"><link rel="prefetch" href="/assets/index.html-DSic4gj0.js" as="script"><link rel="prefetch" href="/assets/baz.html-C-A4dLnI.js" as="script"><link rel="prefetch" href="/assets/index.html-Mb3EOhDU.js" as="script"><link rel="prefetch" href="/assets/ray.html-B-9RhjQG.js" as="script"><link rel="prefetch" href="/assets/KafKa.html-Cq9urZfM.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-3DxOEXCC.js" as="script"><link rel="prefetch" href="/assets/Redis(æ¶ˆæ¯æ¨¡å¼).html-5NiAKZ3i.js" as="script"><link rel="prefetch" href="/assets/Redis(ç›´è¿æ¨¡å¼).html-LmG9WuTQ.js" as="script"><link rel="prefetch" href="/assets/minio.html-Bf_OTPwf.js" as="script"><link rel="prefetch" href="/assets/mongodb.html-DI71ZDkt.js" as="script"><link rel="prefetch" href="/assets/nacosé›†æˆ.html-CYFWoqtd.js" as="script"><link rel="prefetch" href="/assets/ESæ¨¡å—.html-BPHJD67S.js" as="script"><link rel="prefetch" href="/assets/Prometheusæ¨¡å—.html-DULg1W3H.js" as="script"><link rel="prefetch" href="/assets/shardingæ¨¡å—.html-BmzMAoC_.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç³»åˆ—.html-DmzU-QmG.js" as="script"><link rel="prefetch" href="/assets/å¤šçº¿ç¨‹äº‹åŠ¡.html-B52TIYVd.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®æºæ¨¡å—.html-Cj_5mSAT.js" as="script"><link rel="prefetch" href="/assets/Httpsæ¨¡å—.html-zaQziyfb.js" as="script"><link rel="prefetch" href="/assets/Mybatis-Plus.html-ye12E48u.js" as="script"><link rel="prefetch" href="/assets/SQLè·Ÿè¸ªæ¨¡å—.html-C3fV0E15.js" as="script"><link rel="prefetch" href="/assets/Swagger.html-BS4-gVdS.js" as="script"><link rel="prefetch" href="/assets/chatæ¨¡å—.html-DnvGotzH.js" as="script"><link rel="prefetch" href="/assets/listå·¥ä½œæµé›†æˆ.html-DlvJkemm.js" as="script"><link rel="prefetch" href="/assets/plugç»„ä»¶.html-Dn8C3PA3.js" as="script"><link rel="prefetch" href="/assets/xxl-jobæ¨¡å—.html-DEPvuDkw.js" as="script"><link rel="prefetch" href="/assets/ä»“ç›’æ¨¡å—.html-BwgfMEqb.js" as="script"><link rel="prefetch" href="/assets/å·¥å…·ç±».html-CLkwFLJa.js" as="script"><link rel="prefetch" href="/assets/å»¶æ—¶æ¨¡å—.html-Da7t0nUN.js" as="script"><link rel="prefetch" href="/assets/å¼‚å¸¸æ¨¡å—.html-o_1Jr9BH.js" as="script"><link rel="prefetch" href="/assets/æ§åˆ¶å™¨æ’é™¤æ¨¡å—.html-CCaK4cTu.js" as="script"><link rel="prefetch" href="/assets/æ¡†æ¶æ—¥å¿—æ¨¡å—.html-CY7-3d0M.js" as="script"><link rel="prefetch" href="/assets/ç›˜å¤-security.html-ConkBefa.js" as="script"><link rel="prefetch" href="/assets/ç›˜å¤.html-Bf8nZ9AP.js" as="script"><link rel="prefetch" href="/assets/ç›˜å¤securityæ¨¡å—(å«æˆæƒ).html-DSdu-uWb.js" as="script"><link rel="prefetch" href="/assets/ç¼“å­˜æ¨¡å—.html-Dd_KESK0.js" as="script"><link rel="prefetch" href="/assets/è„±æ•å’ŒæŒä¹…å±‚åŠ è§£å¯†.html-8t3bpYMV.js" as="script"><link rel="prefetch" href="/assets/è®¤è¯æ¨¡å—.html-BBss_Qkr.js" as="script"><link rel="prefetch" href="/assets/é…ç½®æ–‡ä»¶åŠ è§£å¯†æ¨¡å—.html-BFvxsc9c.js" as="script"><link rel="prefetch" href="/assets/nacos.html-Cz3OIC3I.js" as="script"><link rel="prefetch" href="/assets/æ—¥å¿—.html-exRrBeL9.js" as="script"><link rel="prefetch" href="/assets/ç†”æ–­.html-CCNOz4MZ.js" as="script"><link rel="prefetch" href="/assets/è®¤è¯.html-D7Rh82tX.js" as="script"><link rel="prefetch" href="/assets/è·¯ç”±.html-DZXs3poZ.js" as="script"><link rel="prefetch" href="/assets/é™æµ.html-DrCObRLx.js" as="script"><link rel="prefetch" href="/assets/é¹°çœ¼æ¨¡å—.html-CB8obI0D.js" as="script"><link rel="prefetch" href="/assets/index.html-CrU-9Gzj.js" as="script"><link rel="prefetch" href="/assets/index.html-DJIlvopY.js" as="script"><link rel="prefetch" href="/assets/å¹¶å‘ç¼–ç¨‹.html-BiT80w5I.js" as="script"><link rel="prefetch" href="/assets/ç±»å›¾-UML.html-NR3RWPCQ.js" as="script"><link rel="prefetch" href="/assets/SpringCloud 1.html-BOQa9KrJ.js" as="script"><link rel="prefetch" href="/assets/SpringCloud 2.html-B3M1Pf_T.js" as="script"><link rel="prefetch" href="/assets/SpringCloud 3.html-De0VCsAn.js" as="script"><link rel="prefetch" href="/assets/index.html-CLF0r0HI.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-Dd7I4KWw.js" as="script"><link rel="prefetch" href="/assets/SQLä¼˜åŒ–.html-lTE1d8Kf.js" as="script"><link rel="prefetch" href="/assets/ä¸€æ¬¡SQLä¼˜åŒ–è®°å½•.html-CsYLCKaR.js" as="script"><link rel="prefetch" href="/assets/å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶äº‹åŠ¡.html-D88rFM87.js" as="script"><link rel="prefetch" href="/assets/Oracle.html-BeB8Ij7A.js" as="script"><link rel="prefetch" href="/assets/Redis.html-DkvFx9JB.js" as="script"><link rel="prefetch" href="/assets/æ•°ä¹‹å’Œ.html-CMCzu6zz.js" as="script"><link rel="prefetch" href="/assets/æœ‰åºæ•°ç»„çš„å¹³æ–¹.html-BRyfzbdC.js" as="script"><link rel="prefetch" href="/assets/ç§»é™¤å…ƒç´ .html-CwUG-q_W.js" as="script"><link rel="prefetch" href="/assets/èºæ—‹çŸ©é˜µ.html-CkhoIqt1.js" as="script"><link rel="prefetch" href="/assets/é“¾è¡¨ç¯‡.html-Csk5VMrm.js" as="script"><link rel="prefetch" href="/assets/é•¿åº¦æœ€å°çš„æ•°ç»„.html-BRZqwluj.js" as="script"><link rel="prefetch" href="/assets/index.html-CGT6f8Xq.js" as="script"><link rel="prefetch" href="/assets/å¿«é€Ÿæ’åºå’Œå †æ’åº.html-j6s2CPqk.js" as="script"><link rel="prefetch" href="/assets/äºŒåˆ†æ³•.html-CF2Tg2eo.js" as="script"><link rel="prefetch" href="/assets/å“ˆå¸Œç¯‡.html-DxNBRvYh.js" as="script"><link rel="prefetch" href="/assets/é“¾è¡¨.html-C9Cl9RMo.js" as="script"><link rel="prefetch" href="/assets/Docker.html-DRxHEHa7.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®ç»“æ„å›¾ç¤º.html-sG1DFEzX.js" as="script"><link rel="prefetch" href="/assets/å®ä¾‹åŒ–Node.html-CMEWCID4.js" as="script"><link rel="prefetch" href="/assets/å¯¹è±¡é—´çš„å…³ç³».html-BiWuAGNS.js" as="script"><link rel="prefetch" href="/assets/ThreadLocal.html-CJkxqAqk.js" as="script"><link rel="prefetch" href="/assets/å…³é”®å­—.html-BR_YgN9t.js" as="script"><link rel="prefetch" href="/assets/404.html-CFyo-491.js" as="script"><link rel="prefetch" href="/assets/index.html-D4Ss5KJV.js" as="script"><link rel="prefetch" href="/assets/index.html-BKt3K27B.js" as="script"><link rel="prefetch" href="/assets/index.html-CrpiA5qk.js" as="script"><link rel="prefetch" href="/assets/index.html-B_X62oNu.js" as="script"><link rel="prefetch" href="/assets/index.html-Bf8fb3MW.js" as="script"><link rel="prefetch" href="/assets/index.html-D3jqBvTA.js" as="script"><link rel="prefetch" href="/assets/index.html-B3PCK4SK.js" as="script"><link rel="prefetch" href="/assets/index.html-aNitpBCW.js" as="script"><link rel="prefetch" href="/assets/index.html-CTEEdHGm.js" as="script"><link rel="prefetch" href="/assets/index.html-e66M783k.js" as="script"><link rel="prefetch" href="/assets/index.html-BeLk77g6.js" as="script"><link rel="prefetch" href="/assets/index.html-Bwq_fOeG.js" as="script"><link rel="prefetch" href="/assets/index.html-DE74Rv0p.js" as="script"><link rel="prefetch" href="/assets/index.html-70JjB0Tk.js" as="script"><link rel="prefetch" href="/assets/index.html-CL3Gdd9e.js" as="script"><link rel="prefetch" href="/assets/index.html-AvwJnzVU.js" as="script"><link rel="prefetch" href="/assets/index.html-BhpDMNFO.js" as="script"><link rel="prefetch" href="/assets/index.html-CF7PPqOC.js" as="script"><link rel="prefetch" href="/assets/index.html-DG6TPN4h.js" as="script"><link rel="prefetch" href="/assets/index.html-CTI82CyX.js" as="script"><link rel="prefetch" href="/assets/index.html-Cj2lmQgw.js" as="script"><link rel="prefetch" href="/assets/index.html-Ca342c0O.js" as="script"><link rel="prefetch" href="/assets/index.html-Biwauxh-.js" as="script"><link rel="prefetch" href="/assets/index.html-DYcmZsjU.js" as="script"><link rel="prefetch" href="/assets/index.html-DxBsJs9j.js" as="script"><link rel="prefetch" href="/assets/index.html-YL5DMZN9.js" as="script"><link rel="prefetch" href="/assets/index.html-BTtkgfWp.js" as="script"><link rel="prefetch" href="/assets/index.html-C-NhjaIO.js" as="script"><link rel="prefetch" href="/assets/index.html-6XvYsibo.js" as="script"><link rel="prefetch" href="/assets/index.html-Dd9TIzND.js" as="script"><link rel="prefetch" href="/assets/index.html-CsFf_hvO.js" as="script"><link rel="prefetch" href="/assets/index.html-CVkHAf2P.js" as="script"><link rel="prefetch" href="/assets/index.html-CFkG9ZAA.js" as="script"><link rel="prefetch" href="/assets/index.html-BIhLYoq5.js" as="script"><link rel="prefetch" href="/assets/index.html-DKF3xajW.js" as="script"><link rel="prefetch" href="/assets/index.html-CW_VCLgg.js" as="script"><link rel="prefetch" href="/assets/index.html-DhN33wNs.js" as="script"><link rel="prefetch" href="/assets/index.html-D7XoFKMm.js" as="script"><link rel="prefetch" href="/assets/index.html-VrT_qpWG.js" as="script"><link rel="prefetch" href="/assets/index.html-CV6j1_Uu.js" as="script"><link rel="prefetch" href="/assets/index.html-8FYCqKQW.js" as="script"><link rel="prefetch" href="/assets/index.html-BnbXzPui.js" as="script"><link rel="prefetch" href="/assets/index.html-DPEbDcE8.js" as="script"><link rel="prefetch" href="/assets/index.html-B-ruj9r3.js" as="script"><link rel="prefetch" href="/assets/index.html-CqbvpJRo.js" as="script"><link rel="prefetch" href="/assets/index.html-D4ZeL4qT.js" as="script"><link rel="prefetch" href="/assets/index.html-DELgG3KL.js" as="script"><link rel="prefetch" href="/assets/index.html-CEuSat7R.js" as="script"><link rel="prefetch" href="/assets/index.html-Bj5ZvB-1.js" as="script"><link rel="prefetch" href="/assets/index.html-Da1yOcOo.js" as="script"><link rel="prefetch" href="/assets/index.html-BfXnDvbY.js" as="script"><link rel="prefetch" href="/assets/index.html-DPgLkV3i.js" as="script"><link rel="prefetch" href="/assets/index.html-B13PdSOC.js" as="script"><link rel="prefetch" href="/assets/index.html-D_0tvvHq.js" as="script"><link rel="prefetch" href="/assets/index.html-D9nvo0rE.js" as="script"><link rel="prefetch" href="/assets/index.html-Di5jOikX.js" as="script"><link rel="prefetch" href="/assets/index.html-DlW2UixI.js" as="script"><link rel="prefetch" href="/assets/index.html-DwiD9KWR.js" as="script"><link rel="prefetch" href="/assets/index.html-BoG8OT6b.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/index-BNnYFWcz.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/ç§’é€Ÿï¼•ã‚»ãƒ³ãƒãƒ¡ãƒ¼ãƒˆãƒ«.svg" alt><!----><!----></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="é›¨å±±"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-user-graduate" style=""></span><!--]-->é›¨å±±<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/portfolio.html" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/demo/" aria-label="æ–‡æ¡£å’Œç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><!--]-->æ–‡æ¡£å’Œç¬”è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E5%8F%8B%E9%93%BE.html" aria-label="æœ‹å‹ä»¬"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-user-graduate" style=""></span><!--]-->æœ‹å‹ä»¬<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Todreamr/Dr.Magic" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:none;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:block;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><span class="vp-sidebar-title">åç«¯ç†è®º</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-check-square" style=""></span><span class="vp-sidebar-title">ç›˜å¤</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä¸­é—´ä»¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ•°æ®æº</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç»„ä»¶ä»‹ç»</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç½‘å…³</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">é¹°çœ¼æ¡†æ¶</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E7%9B%98%E5%8F%A4/%E9%B9%B0%E7%9C%BC%E6%A1%86%E6%9E%B6/%E9%80%9A%E7%94%A8%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E6%A8%A1%E5%9D%97.html" aria-label="é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—"><!---->é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E7%9B%98%E5%8F%A4/%E9%B9%B0%E7%9C%BC%E6%A1%86%E6%9E%B6/%E9%B9%B0%E7%9C%BC%E6%A8%A1%E5%9D%97.html" aria-label="é¹°çœ¼æ¨¡å—"><!---->é¹°çœ¼æ¨¡å—<!----></a></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ€è€ƒ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-check-square" style=""></span><span class="vp-sidebar-title">å¸®åŠ©</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/ToDreamr" target="_blank" rel="noopener noreferrer">Cotton Eye Joe</a></span><span property="author" content="Cotton Eye Joe"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-11-18T07:25:41.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 9 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT9M"></span><!----><!----></div><hr></div><!----><!----><div class="theme-hope-content"><h1 id="é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—"><span>é¹°çœ¼-é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—</span></a></h1><blockquote><h4 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨"><span>å¦‚ä½•ä½¿ç”¨</span></a></h4></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>    è·å–jaråŒ…pangu-hawkeye-trace-simple-agent.jarï¼Œå¹¶æ”¾ç½®æŸä¸ªå›ºå®šä½ç½®ï¼Œ</span></span>
<span class="line"><span>ä¾‹å¦‚/home/kingtsoft-pangu/pangu-hawkeye/ï¼Œç„¶åå¯åŠ¨å‚æ•°æ·»åŠ </span></span>
<span class="line"><span>-javaagent:/home/kingtsoft-pangu/pangu-hawkeye/pangu-hawkeye-trace-simple-agent.jar</span></span>
<span class="line"><span>-Dpgtrace.kafka.servers=10.1.50.131:9092 -Dpgtrace.kafka.topic=pangu.trace.simple</span></span>
<span class="line"><span>-Dpgtrace.appname=PANGU_FRAME</span></span>
<span class="line"><span>pgtrace.kafka.serversï¼škafkaæœåŠ¡åœ°å€ï¼Œç”¨äºä¼ è¾“é“¾è·¯ä¿¡æ¯ï¼Œå¦ä¸€ç«¯ä¼šä½¿ç”¨ä¸€ä¸ªæœåŠ¡æ¥æ”¶å¹¶å­˜å‚¨</span></span>
<span class="line"><span>pgtrace.kafka.topicï¼šç”¨äºäº¤äº’çš„ä¸»é¢˜ä¿¡æ¯ï¼ˆç›®å‰å›ºå®špangu.trace.simpleï¼Œå› ä¸ºè¿˜æ²¡æœ‰æ¢çš„å¿…è¦ï¼‰</span></span>
<span class="line"><span>pgtrace.appnameï¼šå½“å‰åº”ç”¨çš„åº”ç”¨å</span></span>
<span class="line"><span>    åœ¨è·¯å¾„src/main/resources/META-INFä¸‹æ–°å»ºä¸€ä¸ªpg-agent.jsonæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼Œ</span></span>
<span class="line"><span>typeè¡¨ç¤ºéœ€è¦å¢å¼ºç±»çš„å®šä¹‰ï¼Œmethodä»£è¡¨åœ¨é‚£äº›å¢å¼ºç±»ä¸­ï¼Œç¬¦åˆè¿™äº›åç§°çš„æ–¹æ³•ã€‚è¿™é‡Œå†…éƒ¨æ˜¯é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ï¼Œ</span></span>
<span class="line"><span>å®é™…æ˜¯ä½¿ç”¨String.matches(String regex) è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¹¦å†™æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…ã€‚</span></span>
<span class="line"><span>å¦‚æœtypeåŒ¹é…ä¸Šäº†ï¼Œè€Œæ²¡å†™æ–¹æ³•è§„åˆ™ï¼Œåˆ™typeä¸‹çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¢«åŒ¹é…è¿›å»</span></span>
<span class="line"><span>ï¼ˆå½“ç„¶é™¤äº†ä¸€äº›å†…ç½®æ’é™¤çš„æ–¹æ³•ï¼Œmainã€hashcodeã€cloneã€æ„é€ å‡½æ•°ç­‰å¯¹è±¡é€šç”¨çš„ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>json</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>&quot;type&quot;: [</span></span>
<span class="line"><span>&quot;com.kingtsoft.pangu.frame.(.*).test.controller.*&quot;,</span></span>
<span class="line"><span>&quot;com.kingtsoft.pangu.frame.*.test.service.*&quot;,</span></span>
<span class="line"><span>&quot;com.kingtsoft.pangu.frame.simple.base.web.controller.*&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>&quot;method&quot;: [</span></span>
<span class="line"><span>&quot;com.kingtsoft.pangu.frame.*.controller.*&quot;,</span></span>
<span class="line"><span>&quot;testData&quot;,</span></span>
<span class="line"><span>&quot;testData22&quot;,</span></span>
<span class="line"><span>&quot;testSeata2&quot;,</span></span>
<span class="line"><span>&quot;testSeata3&quot;,</span></span>
<span class="line"><span>&quot;getUserListByItems&quot;,</span></span>
<span class="line"><span>&quot;testLog&quot;,</span></span>
<span class="line"><span>&quot;testCall&quot;,</span></span>
<span class="line"><span>&quot;(.*)Some(.*)&quot;</span></span>
<span class="line"><span>  ]</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>    serverè¿è¡Œé’ˆå¯¹pangu-hawkeye-trace-server.pgrçš„æœåŠ¡ï¼Œç”¨æ¥å°†æ•°æ®ç»“æ„åŒ–å­˜å‚¨åˆ°ES</span></span>
<span class="line"><span>    serverç«¯é…ç½®æ–‡ä»¶å¦‚ä¸‹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>yaml</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>spring:</span></span>
<span class="line"><span>	kafka:</span></span>
<span class="line"><span>bootstrap-servers: 10.1.50.131:9092</span></span>
<span class="line"><span>pangu:</span></span>
<span class="line"><span>elasticsearch:</span></span>
<span class="line"><span># ESåœ°å€</span></span>
<span class="line"><span>hosts: &#39;10.1.50.63:9200&#39;</span></span>
<span class="line"><span>kafka:</span></span>
<span class="line"><span>servers: ${spring.kafka.bootstrap-servers}</span></span>
<span class="line"><span>retries: 1</span></span>
<span class="line"><span>batch-size: 16384</span></span>
<span class="line"><span>linger: 1</span></span>
<span class="line"><span>buffer-memory: 1024000</span></span>
<span class="line"><span>group-id: bootKafka</span></span>
<span class="line"><span>auto-commit: true</span></span>
<span class="line"><span>commit-interval: 100</span></span>
<span class="line"><span>session-timeout: 15000</span></span>
<span class="line"><span># éœ€è¦åŠ¨æ€ç”Ÿæˆçš„ä¸»é¢˜ä¿¡æ¯</span></span>
<span class="line"><span>topics:</span></span>
<span class="line"><span>pangu:</span></span>
<span class="line"><span>name: &#39;pangu.trace.simple&#39;</span></span>
<span class="line"><span>num-partitions: 2</span></span>
<span class="line"><span>replication-factor: 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æŠ€æœ¯åŸç†</strong></p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>    è¿™é‡Œä½¿ç”¨äº†bytebuddyçš„å­—èŠ‚ç å¢å¼ºæŠ€æœ¯ï¼Œç”¨äºåœ¨å¯åŠ¨çš„æ—¶å€™ç›´æ¥å°†ä»£ç æ³¨å…¥å¯¹åº”çš„å­—èŠ‚ç ã€‚</span></span>
<span class="line"><span>è¿™é‡Œå¢å¼ºçš„å…¥å£æ˜¯premainæ–¹æ³•ï¼Œé¦–å…ˆåˆå§‹åŒ–äº†kafkaç›¸å…³ä¿¡æ¯ï¼Œç”¨äºä¼ è¾“ä¿¡æ¯(æ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä¸ä¾èµ–äºspringä¸Šä¸‹æ–‡ç¯å¢ƒçš„)ã€‚</span></span>
<span class="line"><span>è¿™é‡Œå°è£…äº†watchMethodæ–¹æ³•ï¼Œå…¥å‚ç¬¬ä¸€ä¸ªæ˜¯å¢å¼ºå™¨çš„å®šä¹‰ä¿¡æ¯ç±»ï¼Œç¬¬äºŒä¸ªå…¥å‚æ˜¯ç±»çš„åŒ¹é…è§„åˆ™ï¼Œç¬¬ä¸‰ä¸ªæ˜¯æ–¹æ³•åŒ¹é…è§„åˆ™ï¼Œ</span></span>
<span class="line"><span>ç¬¬å››ä¸ªæ˜¯å›ºå®šå‚æ•°ï¼Œæ˜¯javaå¢å¼ºå·¥å…·ã€‚æ ¹æ®é“¾è·¯è§„åˆ™ï¼Œè¿™é‡Œåªæ¥å…¥httpå¸¸è§„æ¨¡å¼ä¸‹çš„é“¾è·¯ï¼ŒåŒ…æ‹¬å¸¸è§„feignï¼Œ</span></span>
<span class="line"><span>å†…ç½®äº†ä¸€äº›éå¿…è¦æ–¹æ³•çš„æ’é™¤ï¼Œinstrumentation.addTransformer(getClassFileTransformer());</span></span>
<span class="line"><span>è¿™ä¸ªä»£ç æ˜¯ä¸ºäº†æŸ¥çœ‹å¢å¼ºåçš„å­—èŠ‚ç é•¿ä»€ä¹ˆæ ·ï¼Œå®é™…çº¿ä¸Šæ—¶å€™è¦å»é™¤ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>java</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>package com.kingtsoft.pangu.hawkeye.trace.simple;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Title: &lt;br&gt;</span></span>
<span class="line"><span> * Description: &lt;br&gt;</span></span>
<span class="line"><span> * Company: KingTang &lt;br&gt;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * @author é‡‘ç‚€</span></span>
<span class="line"><span> * @version 1.0</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public class  PgTraceMethodAgent {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestatic JSONObject rules;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidpremain(String agentArgs, Instrumentation instrumentation) {</span></span>
<span class="line"><span>        System.out.println(&quot;åŸºäºjavaagenté“¾è·¯è¿½è¸ª&quot;);</span></span>
<span class="line"><span>// åˆå§‹åŒ–æ¶ˆæ¯</span></span>
<span class="line"><span>        PgTraceKafkaUtil.initKafka();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>watchMethod(TraceMethodAdvice.class, buildMatch(), buildMethodMatch(), instrumentation);</span></span>
<span class="line"><span>watchMethod(</span></span>
<span class="line"><span>                TraceFeignAdvice.class,</span></span>
<span class="line"><span>named(&quot;feign.SynchronousMethodHandler&quot;),</span></span>
<span class="line"><span>named(&quot;executeAndDecode&quot;),</span></span>
<span class="line"><span>                instrumentation);</span></span>
<span class="line"><span>watchMethod(</span></span>
<span class="line"><span>                TraceHttpAdvice.class,</span></span>
<span class="line"><span>named(&quot;org.springframework.web.servlet.DispatcherServlet&quot;),</span></span>
<span class="line"><span>named(&quot;doDispatch&quot;),</span></span>
<span class="line"><span>        instrumentation);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestaticvoidwatchMethod(Class&lt;?&gt; adviceClass,</span></span>
<span class="line"><span>                                    ElementMatcher&lt;?superTypeDescription&gt; typeElementJunction,</span></span>
<span class="line"><span>                                    ElementMatcher&lt;?superMethodDescription&gt; methodElementJunction,</span></span>
<span class="line"><span>                                    Instrumentation instrumentation) {</span></span>
<span class="line"><span>final ByteBuddy byteBuddy =newByteBuddy().with(TypeValidation.of(false));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>new AgentBuilder.Default(byteBuddy)</span></span>
<span class="line"><span>// å¿½ç•¥æ‰ä¸å¢å¼ºçš„ç±»</span></span>
<span class="line"><span>                .ignore(nameStartsWith(&quot;net.bytebuddy.&quot;)</span></span>
<span class="line"><span>                        .or(nameStartsWith(&quot;org.slf4j.&quot;))</span></span>
<span class="line"><span>                        .or(nameStartsWith(&quot;org.groovy.&quot;))</span></span>
<span class="line"><span>                        .or(nameContains(&quot;javassist&quot;))</span></span>
<span class="line"><span>                        .or(nameContains(&quot;.asm.&quot;))</span></span>
<span class="line"><span>                        .or(nameContains(&quot;.reflectasm.&quot;))</span></span>
<span class="line"><span>                        .or(nameStartsWith(&quot;sun.reflect&quot;))</span></span>
<span class="line"><span>                        .or(ElementMatchers.isSynthetic())</span></span>
<span class="line"><span>                        .or(allPgAgentExclude())</span></span>
<span class="line"><span>                )</span></span>
<span class="line"><span>// å¢å¼ºçš„ç±»</span></span>
<span class="line"><span>                .type(typeElementJunction)</span></span>
<span class="line"><span>// å¢å¼ºçš„ç±»éœ€ å¢å¼ºçš„æ–¹æ³•å®ç°</span></span>
<span class="line"><span>                .transform(newTransformer(adviceClass, methodElementJunction))</span></span>
<span class="line"><span>// æ³¨å†Œå¢å¼ºç±»ç›‘å¬å™¨</span></span>
<span class="line"><span>                .with(newAgentBuilderListener())</span></span>
<span class="line"><span>                .with(AgentBuilder.RedefinitionStrategy.RETRANSFORMATION)</span></span>
<span class="line"><span>                .with(newRedefinitionListener())</span></span>
<span class="line"><span>// ç›‘å¬ç±»åŠ è½½</span></span>
<span class="line"><span>                .installOn(instrumentation);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// å¢å¼ºåçš„ç±», å†™å…¥è‡³æ–‡ä»¶, ä¾¿äºè§‚å¯Ÿ</span></span>
<span class="line"><span>        instrumentation.addTransformer(getClassFileTransformer());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestatic ClassFileTransformer getClassFileTransformer()  {</span></span>
<span class="line"><span>returnnewClassFileTransformer() {</span></span>
<span class="line"><span>            @Override</span></span>
<span class="line"><span>publicbyte[] transform(ClassLoader loader, String className,</span></span>
<span class="line"><span>                                    Class&lt;?&gt; classBeingRedefined,</span></span>
<span class="line"><span>                                    ProtectionDomain protectionDomain, byte[] classfileBuffer) {</span></span>
<span class="line"><span>if (className.contains(&quot;TestController&quot;)) {</span></span>
<span class="line"><span>try {</span></span>
<span class="line"><span>                        String substring = className.substring(className.lastIndexOf(&quot;/&quot;));</span></span>
<span class="line"><span>                        Files.write(newFile(&quot;C:/Users/JasonKin/Desktop/bytebuddy-class/&quot;+ substring +&quot;.class&quot;).toPath(), classfileBuffer);</span></span>
<span class="line"><span>                    } catch (IOException e) {</span></span>
<span class="line"><span>                        e.printStackTrace();</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>return classfileBuffer;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestaticclassAgentBuilderListenerimplementsAgentBuilder.Listener {</span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onDiscovery(String typeName, ClassLoader classLoader, JavaModule module, boolean  loaded) {</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onTransformation(TypeDescription typeDescription, ClassLoader classLoader, JavaModule module, boolean  loaded, DynamicType dynamicType) {</span></span>
<span class="line"><span>//            String className = typeDescription.getName();</span></span>
<span class="line"><span>//            System.out.println(&quot;å¢å¼ºç±»: &quot; + className);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onIgnored(TypeDescription typeDescription, ClassLoader classLoader, JavaModule module, boolean  loaded) {</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onError(String typeName, ClassLoader classLoader, JavaModule module, boolean  loaded, Throwable throwable) {</span></span>
<span class="line"><span>            System.out.println(&quot;å¢å¼ºç±»å¤±è´¥: &quot;+ typeName +&quot;; å¤±è´¥åŸå› : &quot;+ throwable);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onComplete(String typeName, ClassLoader classLoader, JavaModule module, boolean  loaded) {</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestaticclassTransformerimplementsAgentBuilder.Transformer {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>private final   Class&lt;?&gt; adviceClass;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>private final   ElementMatcher&lt;?superMethodDescription&gt; methodElementJunction;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicTransformer(Class&lt;?&gt; adviceClass, ElementMatcher&lt;?superMethodDescription&gt; methodElementJunction) {</span></span>
<span class="line"><span>this.adviceClass = adviceClass;</span></span>
<span class="line"><span>this.methodElementJunction = methodElementJunction;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @NeverNull</span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>public DynamicType.Builder&lt;?&gt; transform(</span></span>
<span class="line"><span>                DynamicType.Builder&lt;?&gt; builder,</span></span>
<span class="line"><span>                @NeverNull TypeDescription typeDescription,</span></span>
<span class="line"><span>                ClassLoader classLoader,</span></span>
<span class="line"><span>                JavaModule module,</span></span>
<span class="line"><span>                @NeverNull ProtectionDomain domain) {</span></span>
<span class="line"><span>return builder.visit(</span></span>
<span class="line"><span>                    Advice.to(adviceClass)</span></span>
<span class="line"><span>                            .on(methodElementJunction));</span></span>
<span class="line"><span>//            return builder.method(buildMethodMatch())</span></span>
<span class="line"><span>//                    // è®¾ç½®æ‹¦æˆªå™¨</span></span>
<span class="line"><span>//                    .intercept(MethodDelegation.withDefaultConfiguration()</span></span>
<span class="line"><span>//                            .withBinders(Morph.Binder.install(PgCallable.class)).to(PgMethodInterceptor.class));</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidinitRules() throws IOException {</span></span>
<span class="line"><span>if (rules !=null) {</span></span>
<span class="line"><span>return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</span></span>
<span class="line"><span>        InputStream inputStream = classLoader.getResourceAsStream(&quot;META-INF/pg-agent.json&quot;);</span></span>
<span class="line"><span>if (inputStream ==null) {</span></span>
<span class="line"><span>thrownewRuntimeException(&quot;æ— å¯æœ‰æ•ˆè§„åˆ™æ–‡ä»¶&quot;);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        String json =newString(inputStream.readAllBytes(), StandardCharsets.UTF_8);</span></span>
<span class="line"><span>        rules = JSON.parseObject(json);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic ElementMatcher&lt;?superTypeDescription&gt; buildMatch() {</span></span>
<span class="line"><span>        ElementMatcher.Junction&lt;TypeDescription&gt; judge =not(nameContains(&quot;$&quot;));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>try {</span></span>
<span class="line"><span>initRules();</span></span>
<span class="line"><span>        } catch (IOException e) {</span></span>
<span class="line"><span>            e.printStackTrace();</span></span>
<span class="line"><span>            judge = judge.and(none());</span></span>
<span class="line"><span>return judge;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        JSONArray typeRules = rules.getJSONArray(&quot;type&quot;);</span></span>
<span class="line"><span>if (typeRules !=null) {</span></span>
<span class="line"><span>            ElementMatcher.Junction&lt;TypeDescription&gt; cusMatches =null;</span></span>
<span class="line"><span>for (Object typeRulesRule : typeRules) {</span></span>
<span class="line"><span>                System.out.println(&quot;è§„åˆ™+: &quot;+ typeRulesRule);</span></span>
<span class="line"><span>if (cusMatches ==null) {</span></span>
<span class="line"><span>                    cusMatches =nameMatches((String) typeRulesRule);</span></span>
<span class="line"><span>                } else {</span></span>
<span class="line"><span>                    cusMatches = cusMatches.or(nameMatches((String) typeRulesRule));</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>if (cusMatches !=null) {</span></span>
<span class="line"><span>                judge = judge.and(cusMatches);</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        judge = judge.and(not(isInterface()));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>return judge;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic ElementMatcher&lt;?superMethodDescription&gt; buildMethodMatch() {</span></span>
<span class="line"><span>        ElementMatcher.Junction&lt;MethodDescription&gt; judge =isMethod().and(</span></span>
<span class="line"><span>not(isMain().or(isHashCode())</span></span>
<span class="line"><span>                        .or(isEquals())</span></span>
<span class="line"><span>                        .or(isBridge())</span></span>
<span class="line"><span>                        .or(isClone())</span></span>
<span class="line"><span>                        .or(isConstructor()))</span></span>
<span class="line"><span>        );</span></span>
<span class="line"><span></span></span>
<span class="line"><span>try {</span></span>
<span class="line"><span>initRules();</span></span>
<span class="line"><span>        } catch (IOException e) {</span></span>
<span class="line"><span>            e.printStackTrace();</span></span>
<span class="line"><span>            judge = judge.and(any());</span></span>
<span class="line"><span>return judge;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        JSONArray methodRules = rules.getJSONArray(&quot;method&quot;);</span></span>
<span class="line"><span>if (methodRules !=null) {</span></span>
<span class="line"><span>            ElementMatcher.Junction&lt;MethodDescription&gt; innerJudge =null;</span></span>
<span class="line"><span>for (Object methodRule : methodRules) {</span></span>
<span class="line"><span>                innerJudge = innerJudge ==null?nameMatches((String) methodRule) : innerJudge.or(nameMatches((String) methodRule));</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>            judge = judge.and(innerJudge);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>return judge;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestatic ElementMatcher.Junction&lt;NamedElement&gt; allPgAgentExclude() {</span></span>
<span class="line"><span>returnnameStartsWith(&quot;com.kingtsoft.pangu.hawkeye.trace.simple.&quot;);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestaticclassRedefinitionListenerimplementsAgentBuilder.RedefinitionStrategy.Listener {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onBatch(intindex, List&lt;Class&lt;?&gt;&gt; batch, List&lt;Class&lt;?&gt;&gt; types) {</span></span>
<span class="line"><span>/* do nothing */</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>public Iterable&lt;?extends List&lt;Class&lt;?&gt;&gt;&gt; onError(intindex,</span></span>
<span class="line"><span>                                                          List&lt;Class&lt;?&gt;&gt; batch,</span></span>
<span class="line"><span>                                                          Throwable throwable,</span></span>
<span class="line"><span>                                                          List&lt;Class&lt;?&gt;&gt; types) {</span></span>
<span class="line"><span>return Collections.emptyList();</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>private void   onComplete(intamount, List&lt;Class&lt;?&gt;&gt; types, Map&lt;List&lt;Class&lt;?&gt;&gt;, Throwable&gt; failures) {</span></span>
<span class="line"><span>/* do nothing */</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>æŸ¥çœ‹å¢å¼ºå™¨çš„å®šä¹‰ä¿¡æ¯ç±»</span></span>
<span class="line"><span>è¿™é‡Œæ²¡å…¶ä»–æ“ä½œï¼Œç›´æ¥ä½¿ç”¨TraceMethodHandlerç±»è¿›è¡Œäº†è°ƒç”¨ï¼Œä½œç”¨æ˜¯å¯ä»¥ç›´æ¥åœ¨</span></span>
<span class="line"><span>TraceMethodHandlerç±»ä¸­è°ƒè¯•ï¼Œå¦‚æœé€»è¾‘éƒ½å†™åœ¨TraceMethodAdviceç±»ä¸­ï¼Œå®ƒé‡Œé¢çš„ä»£ç æ˜¯æ— </span></span>
<span class="line"><span>æ³•åšè°ƒè¯•çš„ï¼Œå› ä¸ºä¼šç›´æ¥æ”¹å†™åˆ°ç›®æ ‡ç±»ä¸­ã€‚</span></span>
<span class="line"><span>    OnMethodEnterï¼šæ–¹æ³•è¿›å…¥å‰</span></span>
<span class="line"><span>    OnMethodExitï¼šæ–¹æ³•é€€å‡ºæ—¶ï¼ˆåŒ…æ‹¬å› å¼‚å¸¸è€Œé€€å‡ºï¼‰</span></span>
<span class="line"><span>    @Advice.Origin(&quot;#t&quot;)ï¼šä»£è¡¨ç±»å</span></span>
<span class="line"><span>    @Advice.Origin(&quot;#m&quot;)ï¼šä»£è¡¨æ–¹æ³•å</span></span>
<span class="line"><span>    @Advice.AllArgumentsï¼šä»£è¡¨å…¥å‚æ•°æ®</span></span>
<span class="line"><span>    @Advice.Return(typing= Assigner.Typing.DYNAMIC)ï¼šä»£è¡¨è¿”å›å€¼</span></span>
<span class="line"><span>    @Advice.Thrownä»£è¡¨æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ­£å¸¸è¿”å›æ—¶ä¸ºnull</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>java</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>package com.kingtsoft.pangu.hawkeye.trace.simple.advice;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import net.bytebuddy.asm.Advice;</span></span>
<span class="line"><span>import net.bytebuddy.implementation.bytecode.assign.Assigner;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Title: &lt;br&gt;</span></span>
<span class="line"><span> * Description: &lt;br&gt;</span></span>
<span class="line"><span> * Company: KingTang &lt;br&gt;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * @author é‡‘ç‚€</span></span>
<span class="line"><span> * @version 1.0</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public class  TraceMethodAdvice {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Advice.OnMethodEnter()</span></span>
<span class="line"><span>publicstaticvoidenter(@Advice.Origin(&quot;#t&quot;) String className,</span></span>
<span class="line"><span>                             @Advice.Origin(&quot;#m&quot;) String methodName,</span></span>
<span class="line"><span>                             @Advice.AllArguments Object[] params) {</span></span>
<span class="line"><span>// ä¸ºä»€ä¹ˆå¤„ç†é€»è¾‘ä¸å†™è¿™é‡Œï¼Ÿå› ä¸ºæ­¤ç±»ä¼šè¢«ç›´æ¥å†™å…¥å­—èŠ‚ç ä¸­ï¼Œä¸æ˜¯ç‹¬ç«‹ç¼–è¯‘çš„ã€‚å†™å…¥é¢å¤–æ–¹æ³•å¯ä»¥ä¿è¯å¼€å‘æ—¶å€™å¯è°ƒè¯•</span></span>
<span class="line"><span>        TraceMethodHandler.onMethodEnter(className, methodName, params);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Advice.OnMethodExit(onThrowable= Throwable.class)</span></span>
<span class="line"><span>publicstaticvoidexit(@Advice.Origin(&quot;#t&quot;) String className,</span></span>
<span class="line"><span>                            @Advice.Origin(&quot;#m&quot;) String methodName,</span></span>
<span class="line"><span>                            @Advice.Return(typing= Assigner.Typing.DYNAMIC) Object returnObject,</span></span>
<span class="line"><span>                            @Advice.Thrown Throwable thrown) {</span></span>
<span class="line"><span>if (thrown !=null) {</span></span>
<span class="line"><span>            TraceMethodHandler.onMethodException(thrown);</span></span>
<span class="line"><span>return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        TraceMethodHandler.onMethodExit(className, methodName, returnObject);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ç»§ç»­çœ‹TraceMethodHandlerè¿™é‡Œå®šä¹‰äº†ä¸‰ä¸ªèŒƒå›´</span></span>
<span class="line"><span>    traceidï¼šä¸€æ¬¡é“¾è·¯è·Ÿè¸ªå”¯ä¸€</span></span>
<span class="line"><span>    spanidï¼šä¸€ä¸ªå¾®æœåŠ¡å”¯ä¸€ï¼ˆåŒè¿›ç¨‹ï¼‰</span></span>
<span class="line"><span>    nodeidï¼šä¸€ä¸ªç›‘æ§çš„æ–¹æ³•å”¯ä¸€</span></span>
<span class="line"><span>    è¿™é‡Œçœ‹TraceHttpHandlerï¼Œä¸Šé¢ä»‹ç»äº†æ–¹æ³•çš„åˆ‡å…¥ï¼Œè¿™é‡Œå°±æ˜¯httpçš„åˆ‡å…¥ï¼ŒåŸç†ç›¸åŒï¼Œæ‰€æœ‰ç›´æ¥</span></span>
<span class="line"><span>ä»‹ç»TraceHttpHandlerã€‚&lt;br /&gt;webçš„å…¥å£æ˜¯åœ¨TraceHttpHandlerä¸­æ ‡è®°çš„ï¼Œè¿™é‡Œé»˜è®¤å…¥å£</span></span>
<span class="line"><span>éƒ½æ˜¯webè¯·æ±‚å…¥å£ã€‚ä¼šåˆå§‹åŒ–traceidï¼Œç„¶åè¿›å…¥æ–¹æ³•è·Ÿè¸ªã€‚è¿™é‡Œæ–¹æ³•é€€å‡ºéƒ½ä¼šè°ƒç”¨ MDC.clear();ï¼Œ</span></span>
<span class="line"><span>ç›®çš„æ˜¯ç»™ä¸Šä¸‹æ–‡æ•°æ®è¿›è¡Œæ¸…é™¤ï¼ŒåŒ…æ‹¬æ—¥å¿—ä½“ç³»ä¸­çš„tidä¿¡æ¯ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>java</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>package com.kingtsoft.pangu.hawkeye.trace.simple.advice;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.common.constant.PgAgentConst;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.simple.TrackContext;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.simple.TrackManager;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.tools.model.TraceContext;</span></span>
<span class="line"><span>import org.slf4j.MDC;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import javax.servlet.http.HttpServletRequest;</span></span>
<span class="line"><span>import java.util.UUID;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Title: &lt;br&gt;</span></span>
<span class="line"><span> * Description: &lt;br&gt;</span></span>
<span class="line"><span> * Company: KingTang &lt;br&gt;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * @author é‡‘ç‚€</span></span>
<span class="line"><span> * @version 1.0</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public class  TraceHttpHandler {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidonMethodEnter(String className, String methodName, Object[] params) {</span></span>
<span class="line"><span>        HttpServletRequest request = (HttpServletRequest) params[0];</span></span>
<span class="line"><span>        String traceId = request.getHeader(PgAgentConst.Header.TRACE_ID);</span></span>
<span class="line"><span>        TraceContext context = TrackContext.getTraceContext();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if (traceId !=null) {</span></span>
<span class="line"><span>if (context ==null) {</span></span>
<span class="line"><span>                context =newTraceContext();</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>            context.setTraceId(traceId);</span></span>
<span class="line"><span>            context.setSpanId(request.getHeader(PgAgentConst.Header.SPAN_ID));</span></span>
<span class="line"><span>            TrackContext.setTraceContext(context);</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>if (context ==null) {</span></span>
<span class="line"><span>                context =newTraceContext();</span></span>
<span class="line"><span>                context.setTraceId(UUID.randomUUID().toString());</span></span>
<span class="line"><span>                TrackContext.setTraceContext(context);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                TrackManager.createTrace(request.getMethod() +&quot;: &quot;+ request.getRequestURL());</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidonMethodExit(String className, String methodName, Object returnObject) {</span></span>
<span class="line"><span>        TrackContext.clearContext();</span></span>
<span class="line"><span>        MDC.clear();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidonMethodException(Throwable thrown) {</span></span>
<span class="line"><span>        TrackContext.clearContext();</span></span>
<span class="line"><span>        MDC.clear();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>    é€šè¿‡TrackManager.initBaseInfo(key)ï¼Œåˆå§‹åŒ–æ•´ä½“çš„è·Ÿè¸ªä¿¡æ¯ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯æ–¹æ³•ï¼Œ</span></span>
<span class="line"><span>TrackManager.initBaseInfo(key)ä¸»è¦æ˜¯åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨spanidï¼Œä¸”è‹¥å­˜åœ¨çˆ¶çº§ï¼Œ</span></span>
<span class="line"><span>åˆ™ä¼šè¿›è¡Œå­çˆ¶èŠ‚ç‚¹å…³è”ã€‚</span></span>
<span class="line"><span>    æ³¨æ„ï¼Œè¿™é‡Œçš„createEntrySpanå¹¶éæ¯æ¬¡éƒ½åˆ›å»ºspanä¿¡æ¯ï¼Œè€Œæ˜¯ä¼šåˆ©ç”¨ç°æœ‰spanï¼Œå› ä¸ºå®ƒä¸€ä¸ª</span></span>
<span class="line"><span>æœåŠ¡æ˜¯åŒä¸€ä¸ªï¼Œé‡å¤åˆ›å»ºç¼“å­˜æ˜¯ä¸ºäº†ç¬¦åˆæ ˆçš„æ•°æ®ç»“æ„ï¼Œå…ˆè¿›åå‡ºã€‚åœ¨æ¯ä¸ªæ–¹æ³•éƒ½èƒ½çœ‹åˆ°spanä¿¡æ¯</span></span>
<span class="line"><span>å¹¶åˆ¤æ–­å½“å‰åˆ°é‚£ä¸ªç¯èŠ‚äº†ã€‚ç„¶åç»„è£…PgTraceNodeInfoä¿¡æ¯ï¼Œä¸ºèŠ‚ç‚¹IDï¼Œæ¯ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€æ¬¡ï¼Œ</span></span>
<span class="line"><span>ç”Ÿå‘½å‘¨æœŸæ˜¯æ–¹æ³•ã€‚å¹¶ä¸”ä¹Ÿä¼šæœ‰å­çˆ¶çº§å…³è”å…³ç³»ã€‚è¿™é‡Œçš„TrackManager.setMdc(nodeId);æ˜¯</span></span>
<span class="line"><span>ä¸ºäº†å°†nodeIdç»‘å®šå…¥æ—¥å¿—ä½“ç³»ï¼Œè¿™æ ·ï¼Œæ—¥å¿—è®°å½•å°±èƒ½ä¸è·Ÿè¸ªçš„å¶å­èŠ‚ç‚¹ç»‘å®šï¼Œå°±å®ç°äº†åˆ†å¸ƒå¼çš„</span></span>
<span class="line"><span>æ—¥å¿—åˆ‡ç‰‡åŠŸèƒ½ã€‚è¿›å…¥ç»„è£…åå°±å¯ä»¥åœ¨é€€å‡ºçš„æ—¶å€™çŸ¥æ™“å¯¹åº”çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚</span></span>
<span class="line"><span>    é€€å‡ºæ—¶ï¼ˆåŒ…å«å¼‚å¸¸ï¼‰ï¼Œåˆ¤æ–­spanä¿¡æ¯æ˜¯å¦ç»“æŸï¼ˆåˆšæ‰æ ˆé‡Œçš„spanå…¨éƒ¨å¼¹å‡ºåå°±ä»£è¡¨ç»“æŸäº†ï¼‰ï¼Œ</span></span>
<span class="line"><span>æœ€åå­˜å‚¨spanä¿¡æ¯ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>java</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>package com.kingtsoft.pangu.hawkeye.trace.simple.advice;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import com.alibaba.fastjson2.JSON;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.common.model.PgTraceNodeInfo;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.simple.PgAgentTool;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.simple.TrackContext;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.simple.TrackManager;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.tools.model.TraceContext;</span></span>
<span class="line"><span>import org.slf4j.MDC;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.time.Clock;</span></span>
<span class="line"><span>import java.time.ZoneId;</span></span>
<span class="line"><span>import java.util.Arrays;</span></span>
<span class="line"><span>import java.util.Optional;</span></span>
<span class="line"><span>import java.util.UUID;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Title: &lt;br&gt;</span></span>
<span class="line"><span> * Description: &lt;br&gt;</span></span>
<span class="line"><span> * Company: KingTang &lt;br&gt;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * @author é‡‘ç‚€</span></span>
<span class="line"><span> * @version 1.0</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public class  TraceMethodHandler {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidonMethodEnter(String className, String methodName, Object[] params) {</span></span>
<span class="line"><span>        String key = className +&quot;.&quot;+ methodName;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        TrackManager.initBaseInfo(key);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        String entrySpan = TrackManager.createEntrySpan();</span></span>
<span class="line"><span>        System.out.println(&quot;é“¾è·¯è¿½è¸ªå‰ç½®ï¼š&quot;+ entrySpan +&quot; &quot;+ key);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        Clock clock = Clock.system(ZoneId.of(&quot;GMT+8&quot;));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        String pNodeId = Optional.ofNullable((PgTraceNodeInfo) TrackManager.getInfoOnly())</span></span>
<span class="line"><span>                .map(PgTraceNodeInfo::getNodeId).orElse(null);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        TraceContext context = TrackContext.getTraceContext();</span></span>
<span class="line"><span>        String nodeId = UUID.randomUUID().toString();</span></span>
<span class="line"><span>        context.setNodeId(nodeId);</span></span>
<span class="line"><span>        TrackManager.setMdc(nodeId);</span></span>
<span class="line"><span>        PgTraceNodeInfo pgTraceSpanInfo =newPgTraceNodeInfo()</span></span>
<span class="line"><span>                .setAppName(PgAgentTool.appName)</span></span>
<span class="line"><span>                .setClassName(className)</span></span>
<span class="line"><span>                .setMethod(methodName)</span></span>
<span class="line"><span>                .setSpanId(entrySpan)</span></span>
<span class="line"><span>                .setStartTimestamp(clock.millis())</span></span>
<span class="line"><span>                .setParams(PgAgentTool.getDataFormat(params, key))</span></span>
<span class="line"><span>                .setState(1)</span></span>
<span class="line"><span>                .setNodeType(&quot;method&quot;)</span></span>
<span class="line"><span>                .setTraceId(context.getTraceId())</span></span>
<span class="line"><span>                .setNodeId(nodeId)</span></span>
<span class="line"><span>                .setpNodeId(pNodeId);</span></span>
<span class="line"><span>        TrackManager.setInfo(pgTraceSpanInfo);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidonMethodExit(String className, String methodName, Object returnObject) {</span></span>
<span class="line"><span>        PgTraceNodeInfo pgTraceInfo = (PgTraceNodeInfo) TrackManager.getInfo();</span></span>
<span class="line"><span>if (pgTraceInfo ==null) {</span></span>
<span class="line"><span>return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        Clock clock = Clock.system(ZoneId.of(&quot;GMT+8&quot;));</span></span>
<span class="line"><span>        pgTraceInfo.setEndTimestamp(clock.millis())</span></span>
<span class="line"><span>                .setCost(pgTraceInfo.getEndTimestamp() - pgTraceInfo.getStartTimestamp());</span></span>
<span class="line"><span>        String key = className +&quot;.&quot;+ methodName;</span></span>
<span class="line"><span>// çˆ¶çº§ è¦ä¸HTTPåšåˆ¤æ–­å¯èƒ½è¦æ”¹é€ </span></span>
<span class="line"><span>        pgTraceInfo.setRetObj(PgAgentTool.getDataFormat(returnObject, key))</span></span>
<span class="line"><span>                .setState(2);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        System.out.println(&quot;é“¾è·¯è¿½è¸ªåç½®: ä¿¡æ¯ &quot;+ JSON.toJSONString(pgTraceInfo));</span></span>
<span class="line"><span>        PgAgentTool.sendMsg(pgTraceInfo);</span></span>
<span class="line"><span>        TrackManager.getExitSpan();</span></span>
<span class="line"><span>        TrackManager.doMdcCheck();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        PgAgentTool.doExitSpan(clock, key);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidonMethodException(Throwable thrown) {</span></span>
<span class="line"><span>        Clock clock = Clock.system(ZoneId.of(&quot;GMT+8&quot;));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        PgTraceNodeInfo pgTraceInfo = (PgTraceNodeInfo) TrackManager.getInfo();</span></span>
<span class="line"><span>if (pgTraceInfo ==null) {</span></span>
<span class="line"><span>            PgAgentTool.doExSpan(clock);</span></span>
<span class="line"><span>return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        pgTraceInfo.setEndTimestamp(clock.millis())</span></span>
<span class="line"><span>                .setState(3)</span></span>
<span class="line"><span>                .setExceptionInfo(thrown +&quot;:\n &quot;+ PgAgentTool.getStringFormat(Arrays.toString(thrown.getStackTrace())));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        System.out.println(&quot;å¼‚å¸¸æ‹¦æˆª: ä¿¡æ¯ &quot;+ JSON.toJSONString(pgTraceInfo));</span></span>
<span class="line"><span>        PgAgentTool.sendMsg(pgTraceInfo);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        TrackManager.getExitSpan();</span></span>
<span class="line"><span>        TrackManager.doMdcCheck();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        PgAgentTool.doExSpan(clock);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>java</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>package com.kingtsoft.pangu.hawkeye.trace.simple;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.common.model.PgTraceInfo;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.common.model.PgTraceNodeInfo;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.common.model.PgTraceNodeStdInfo;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.common.model.PgTraceSpanInfo;</span></span>
<span class="line"><span>import com.kingtsoft.pangu.hawkeye.trace.tools.model.TraceContext;</span></span>
<span class="line"><span>import org.slf4j.MDC;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.time.Clock;</span></span>
<span class="line"><span>import java.time.ZoneId;</span></span>
<span class="line"><span>import java.util.Optional;</span></span>
<span class="line"><span>import java.util.Stack;</span></span>
<span class="line"><span>import java.util.UUID;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Title: &lt;br&gt;</span></span>
<span class="line"><span> * Description: &lt;br&gt;</span></span>
<span class="line"><span> * Company: KingTang &lt;br&gt;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * @author é‡‘ç‚€</span></span>
<span class="line"><span> * @version 1.0</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>public class  TrackManager {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestaticfinal ThreadLocal&lt;Stack&lt;String&gt;&gt; TRACK =new ThreadLocal&lt;&gt;();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestaticfinal ThreadLocal&lt;Stack&lt;PgTraceNodeStdInfo&gt;&gt; TRACK_INFO =new ThreadLocal&lt;&gt;();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>//    private static final InheritableThreadLocal&lt;Stack&lt;String&gt;&gt; TRACK = new InheritableThreadLocal&lt;&gt;();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>privatestatic String createSpan() {</span></span>
<span class="line"><span>        Stack&lt;String&gt; stack = TRACK.get();</span></span>
<span class="line"><span>if (stack ==null) {</span></span>
<span class="line"><span>            stack =new Stack&lt;&gt;();</span></span>
<span class="line"><span>            TRACK.set(stack);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        String linkId;</span></span>
<span class="line"><span>if (stack.isEmpty()) {</span></span>
<span class="line"><span>            linkId = TrackContext.getSpanId();</span></span>
<span class="line"><span>if (linkId ==null) {</span></span>
<span class="line"><span>                linkId =&quot;nvl&quot;;</span></span>
<span class="line"><span>                TrackContext.setSpanId(linkId);</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>            linkId = stack.peek();</span></span>
<span class="line"><span>            TrackContext.setSpanId(linkId);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>return linkId;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic String createEntrySpan() {</span></span>
<span class="line"><span>        String span =createSpan();</span></span>
<span class="line"><span>        Stack&lt;String&gt; stack = TRACK.get();</span></span>
<span class="line"><span>        System.out.println(&quot;push:&quot;+ span);</span></span>
<span class="line"><span>        stack.push(span);</span></span>
<span class="line"><span>return span;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic String getExitSpan() {</span></span>
<span class="line"><span>        Stack&lt;String&gt; stack = TRACK.get();</span></span>
<span class="line"><span>if (stack ==null|| stack.isEmpty()) {</span></span>
<span class="line"><span>            TrackContext.clear();</span></span>
<span class="line"><span>            TRACK.remove();</span></span>
<span class="line"><span>returnnull;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        String str = stack.pop();</span></span>
<span class="line"><span>if (stack.isEmpty()) {</span></span>
<span class="line"><span>            TrackContext.clear();</span></span>
<span class="line"><span>            TRACK.remove();</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>return str;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic String getCurrentSpan() {</span></span>
<span class="line"><span>        Stack&lt;String&gt; stack = TRACK.get();</span></span>
<span class="line"><span>if (stack ==null|| stack.isEmpty()) {</span></span>
<span class="line"><span>returnnull;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>return stack.peek();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidsetInfo(PgTraceNodeStdInfo traceSpanInfo) {</span></span>
<span class="line"><span>        Stack&lt;PgTraceNodeStdInfo&gt; stack = TRACK_INFO.get();</span></span>
<span class="line"><span>if (stack ==null) {</span></span>
<span class="line"><span>            stack =new Stack&lt;&gt;();</span></span>
<span class="line"><span>            TRACK_INFO.set(stack);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        stack.push(traceSpanInfo);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic PgTraceNodeStdInfo getInfo() {</span></span>
<span class="line"><span>        Stack&lt;PgTraceNodeStdInfo&gt; stack = TRACK_INFO.get();</span></span>
<span class="line"><span>if (stack ==null) {</span></span>
<span class="line"><span>returnnull;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>if (stack.isEmpty()) {</span></span>
<span class="line"><span>            TRACK_INFO.remove();</span></span>
<span class="line"><span>returnnull;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        PgTraceNodeStdInfo pgTraceSpanInfo = stack.pop();</span></span>
<span class="line"><span>if (stack.isEmpty()) {</span></span>
<span class="line"><span>            TRACK_INFO.remove();</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>return pgTraceSpanInfo;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidsetMdc(String nodeId) {</span></span>
<span class="line"><span>        MDC.put(&quot;tid&quot;, nodeId);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoiddoMdcCheck() {</span></span>
<span class="line"><span>        Optional.ofNullable((PgTraceNodeInfo) TrackManager.getInfoOnly())</span></span>
<span class="line"><span>                .ifPresent(n -&gt;  MDC.put(&quot;tid&quot;, n.getNodeId()));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstatic PgTraceNodeStdInfo getInfoOnly() {</span></span>
<span class="line"><span>        Stack&lt;PgTraceNodeStdInfo&gt; stack = TRACK_INFO.get();</span></span>
<span class="line"><span>if (stack ==null) {</span></span>
<span class="line"><span>returnnull;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>if (stack.isEmpty()) {</span></span>
<span class="line"><span>            TRACK_INFO.remove();</span></span>
<span class="line"><span>returnnull;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>return stack.peek();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidinitBaseInfo(String description) {</span></span>
<span class="line"><span>        String spanId = TrackManager.getCurrentSpan();</span></span>
<span class="line"><span>        TraceContext context = TrackContext.getTraceContext();</span></span>
<span class="line"><span>if (null== spanId &amp;&amp; context !=null) {</span></span>
<span class="line"><span>            spanId = UUID.randomUUID().toString();</span></span>
<span class="line"><span>            TrackContext.setSpanId(spanId);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            Clock clock = Clock.system(ZoneId.of(&quot;GMT+8&quot;));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// è¿™é‡Œä¼šè®¾ç½®spanId</span></span>
<span class="line"><span>int isFirst =initTraceInfo(description) ?1:0;</span></span>
<span class="line"><span>            PgTraceSpanInfo pgTraceSpanInfo =newPgTraceSpanInfo()</span></span>
<span class="line"><span>                    .setSpanId(spanId)</span></span>
<span class="line"><span>                    .setAppName(PgAgentTool.appName)</span></span>
<span class="line"><span>                    .setTraceId(context.getTraceId())</span></span>
<span class="line"><span>                    .setpSpanId(context.getSpanId())</span></span>
<span class="line"><span>                    .setStartTimestamp(clock.millis())</span></span>
<span class="line"><span>                    .setState(1)</span></span>
<span class="line"><span>                    .setIsFirst(isFirst);</span></span>
<span class="line"><span>            TrackContext.setTraceSpanContext(pgTraceSpanInfo);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// è¿™é‡ŒæŠŠçˆ¶çº§çš„æ›¿æ¢ä¸ºå­é›†</span></span>
<span class="line"><span>            context.setSpanId(spanId);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticboolean  initTraceInfo(String description) {</span></span>
<span class="line"><span>        TraceContext context = TrackContext.getTraceContext();</span></span>
<span class="line"><span>if (context ==null) {</span></span>
<span class="line"><span>            context =newTraceContext();</span></span>
<span class="line"><span>            context.setTraceId(UUID.randomUUID().toString());</span></span>
<span class="line"><span>            TrackContext.setTraceContext(context);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>createTrace(description);</span></span>
<span class="line"><span>returntrue;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>returnfalse;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>publicstaticvoidcreateTrace(String description) {</span></span>
<span class="line"><span>        Clock clock = Clock.system(ZoneId.of(&quot;GMT+8&quot;));</span></span>
<span class="line"><span>        PgTraceInfo pgTraceInfo =newPgTraceInfo()</span></span>
<span class="line"><span>                .setTraceId(TrackContext.getTraceContext().getTraceId())</span></span>
<span class="line"><span>                .setDescription(description)</span></span>
<span class="line"><span>                .setStartTimestamp(clock.millis())</span></span>
<span class="line"><span>                .setAppName(PgAgentTool.appName);</span></span>
<span class="line"><span>        PgAgentTool.sendTraceMsg(pgTraceInfo);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Todreamr/Dr.Magic/edit/main/src/ç›˜å¤/é¹°çœ¼æ¡†æ¶/é€šç”¨é“¾è·¯è·Ÿè¸ªæ¨¡å—.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: aruixrain@gmail.com">ä¹æ­Œå¤©ä¸Šæœ‰</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/%E7%9B%98%E5%8F%A4/%E9%B9%B0%E7%9C%BC%E6%A1%86%E6%9E%B6/%E9%B9%B0%E7%9C%BC%E6%A8%A1%E5%9D%97.html" aria-label="é¹°çœ¼æ¨¡å—"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">é¹°çœ¼æ¨¡å—<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">ç”±èŒICPå¤‡æ¡ˆ</div><div class="vp-copyright">Copyright Â© Mr.Cotton Eye Joe</div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-ux1ElDeN.js" defer></script>
  </body>
</html>
